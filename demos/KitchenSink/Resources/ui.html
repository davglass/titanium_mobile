<html>
<head>
	<title>UI API</title>
	
	<script>
	
	// test preload feature
	window.onload = function()
	{
		Titanium.API.info("preloaded UI page");
	};
	
	Titanium.UI.addEventListener('tabchange',function(e)
	{
		Titanium.API.info('tabchange index ' + e.index  + ' name ' 
				+ e.name + ' prevIndex ' + e.prevIndex + ' prevName ' + e.prevName);
	});
	
	// data for tableview
	var data = [
		{title:'Alert'},
		{title:'Options Dialog'},
		{title:'Window Focus Events',hasChild:true},
		{title:'Slider',hasChild:true},
		{title:'Text Fields',hasChild:true},
		{title:'Text Field Events',hasChild:true},
		{title:'Content Buttons',hasChild:true},
		{title:'Switch',hasChild:true},
		{title:'Progress Bar',hasChild:true},
		{title:'Activity Indicator',hasChild:true},
		{title:'Web + Native',hasChild:true},
		{title:'TableView - Delete',hasChild:true},
		{title:'TableView - Add',hasChild:true},
		{title:'TableView - Update',hasChild:true},
		{title:'TableView - Set',hasChild:true},
		{title:'TableView - Append',hasChild:true},
		{title:'Fullscreen',hasChild:true},
		{title:'Status Bar (iPhone)',hasChild:true},
		{title:'Set Badge Icon (iPhone)'},
		{title:'Button Bar (iPhone)',hasChild:true},
		{title:'Tabbed Bar (iPhone)',hasChild:true},
		{title:'Navbar - Title (iPhone)',hasChild:true},
		{title:'Navbar - Right (iPhone)',hasChild:true},
		{title:'Navbar - Left (iPhone)',hasChild:true},
		{title:'Navbar - Hide (iPhone)',hasChild:true},
		{title:'Bar Color (iPhone)',hasChild:true},
		{title:'Toolbar - Left Align (iPhone)',hasChild:true},
		{title:'Toolbar - Middle Align (iPhone)',hasChild:true},
		{title:'Toolbar - Right Align (iPhone)',hasChild:true},
		{title:'Toolbar - Many Buttons (iPhone)',hasChild:true},
		{title:'Toolbar - Fixed Space (iPhone)',hasChild:true},
		{title:'Toolbar - Hide/Show (iPhone)',hasChild:true},
		{title:'Tabbar - Hide (iPhone)',hasChild:true},
		{title:'Open (animated false) (iPhone)',hasChild:true},
		{title:'Notifications (Android)'},
		{title:'Menu (Android)'},
		{title:'Dynamic Content', hasChild:true},
		{title:'Tab Change', hasChild:true},
		{title:'JS Events', hasChild:true},
		{title:'JS Events 2', hasChild:true},
		{title:'Dynamic Images', hasChild:true},
		{title:'Window Title Change', hasChild:false},
		{title:'Custom Back Button I (iPhone)', hasChild:false},
		{title:'Custom Back Button II (iPhone)', hasChild:false},
		{title:'Custom Table View Data', hasChild:false},
		{title:'Set Control Values', hasChild:false},
		{title:'Modal Window (iPhone)', hasChild:false},
		{title:'Picker', hasChild:false},
		{title:'Custom Table Views',hasChild:true},
		{title:'Set App Badge (iPhone)'},
		{title:'Reset App Badge (iPhone)'},
		{title:'Keyboard Toolbar (iPhone)'},
		
	];
	
	// tableview object
	var tableView = Titanium.UI.createTableView({data:data,title:'UI API',isPrimary:true}, function(eventObject) 
	{
		// handle tableview click events
		var idx = eventObject.index;
		switch(idx)
		{
			case 0:
			{
				Titanium.Analytics.featureEvent('ui.alert');
				showAlert();
				break;
			}
			case 1:
			{
				Titanium.Analytics.featureEvent('ui.options');
				showOptionsDialog();
				break;
			}
			case 2:
			{
				Titanium.Analytics.featureEvent('ui.window_focus_events');
				var win = Titanium.UI.createWindow({url:'window_unfocus.html',title:'Focus Events', barColor:'#336699',backgroundColor:'#fff'});				
				win.open({animated:true});
				break;
			}
			case 3:
			{
				Titanium.Analytics.featureEvent('ui.slider');
				var win = Titanium.UI.createWindow({url:'slider.html',title:'Slider',backgroundColor:'#fff'});
				
				if (Titanium.Platform.name != 'android')
				{
					var slider = Titanium.UI.createSlider({width:100,min:0,max:10,value:0});
					win.setTitleControl(slider);
				}
				win.open({animated:true});		
				break;
			}
			case 4:
			{
				Titanium.Analytics.featureEvent('ui.textfields');
				var win = Titanium.UI.createWindow({url:'textfields.html',title:'Text Fields',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}
			case 5:
			{
				Titanium.Analytics.featureEvent('ui.textfield_events');
				var win = Titanium.UI.createWindow({url:'textfield_events.html',title:'Text Field Events',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}

			case 6:
			{
				Titanium.Analytics.featureEvent('ui.buttons');
				var win = Titanium.UI.createWindow({url:'buttons.html',title:'Content Buttons',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}
			case 7:
			{
				Titanium.Analytics.featureEvent('ui.switch');
				var win = Titanium.UI.createWindow({url:'switch.html',title:'Switch',backgroundColor:'#fff'});
				if (Titanium.Platform.name != 'android')
				{
					var inst = Titanium.UI.createSwitch({value:true,width:95});
					win.setTitleControl(inst)
				}
				win.open({animated:true});		
				break;
			}
			case 8:
			{
				Titanium.Analytics.featureEvent('ui.progress_bars');
				var win = Titanium.UI.createWindow({url:'progress_bars.html',title:'Progress Bar',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}

			case 9:
			{
				Titanium.Analytics.featureEvent('ui.activity_indicators');
				var win = Titanium.UI.createWindow({url:'activity_indicators.html',title:'Indicators',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}


			case 10:
			{
				Titanium.Analytics.featureEvent('ui.web_plus_native');
				var win = Titanium.UI.createWindow({url:'composite.html',title:'Web+Native',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}

			case 11:
			{
				Titanium.Analytics.featureEvent('ui.tableview.delete');
				var win = Titanium.UI.createWindow({url:'tableview_delete.html',title:'TableView Delete'});
				win.open({animated:true});		
				break;
			}
			case 12:
			{
				Titanium.Analytics.featureEvent('ui.tableview.add');
				var win = Titanium.UI.createWindow({url:'tableview_add.html',title:'TableView Add'});
				win.open({animated:true});		
				break;
			}
			case 13:
			{
				Titanium.Analytics.featureEvent('ui.tableview.update');
				var win = Titanium.UI.createWindow({url:'tableview_update.html',title:'TableView Update'});
				win.open({animated:true});		
				break;
			}
			case 14:
			{
				Titanium.Analytics.featureEvent('ui.tableview.set');
				var win = Titanium.UI.createWindow({url:'tableview_set.html',title:'TableView Set'});
				win.open({animated:true});		
				break;
			}
			case 15:
			{
				Titanium.Analytics.featureEvent('ui.tableview.append');
				var win = Titanium.UI.createWindow({url:'tableview_append.html',title:'TableView Append'});
				win.open({animated:true});		
				break;
			}
			
			case 16:
			{
				Titanium.Analytics.featureEvent('ui.fullscreen');
				var win = Titanium.UI.createWindow({url:'fullscreen.html',fullscreen:true,title:'Fullscreen',backgroundColor:'#fff'});
				win.open({animated:true});
				break;
			}
			case 17:
			{
				Titanium.Analytics.featureEvent('ui.statusbar');
				var win = Titanium.UI.createWindow({url:'statusbar.html',title:'Status Bar'});
				win.open({animated:true});		
				break;
			}
			case 18:
			{
				Titanium.Analytics.featureEvent('ui.tabs');
				var tabs = Titanium.UI.getTabs();
				tabs[0].setBadge(1);
				tabs[1].setBadge(2);
				tabs[2].setBadge(3);
				tabs[3].setBadge(4);
				
				break;
			}
			case 19:
			{
				Titanium.Analytics.featureEvent('ui.button_bar');
				var buttonBar = Titanium.UI.createButtonBar({labels:['Button1', 'Button2'],color:'#336699'});
				buttonBar.addEventListener('click',function(e)
				{
					var a = Titanium.UI.createAlertDialog();
					a.setTitle('Buttonbar Test');
					a.setMessage('You click button index = ' + e.index);
					a.show();
				});
				var buttonBar2 = Titanium.UI.createButtonBar({
					labels:['Button5', 'Button6','Button7', 'Button8','Button9'],
					color:'#336699'
				});
				buttonBar2.addEventListener('click',function(e)
				{
					var a = Titanium.UI.createAlertDialog();
					a.setTitle('Buttonbar Test');
					a.setMessage('You click button index = ' + e.index);
					a.show();
				});
				
				var win = Titanium.UI.createWindow({url:'buttonbar.html',title:'Button Bar'});
				win.setTitleControl(buttonBar);
				win.setToolbar([buttonBar2])
				win.open({animated:true});		

				break;
			}
			case 20:
			{
				Titanium.Analytics.featureEvent('ui.tabbed_bar');
				var tabbar = Titanium.UI.createTabbedBar({labels:['Tab1', 'Tab2'],index:1});
				var flexSpace = Titanium.UI.createButton({
					systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE
				});
				var tabbar2 = Titanium.UI.createTabbedBar({
					labels:['Tab5', 'Tab6','Tab7', 'Tab8','Tab9'],
					backgroundColor:'#336699',
					index:2
				});
				
				var win = Titanium.UI.createWindow({url:'tabbar.html',title:'Tab Bar'});
				win.setToolbar([flexSpace,tabbar2,flexSpace]);
				win.setRightNavButton(tabbar);
				win.open({animated:true});		
				break;
			}

			case 21:
			{
				// The organizational hierarchy defined by the tags is not limited to two levels.
				// Here, I want to track my navbar feature at a finer level of detail, so I
				// define subareas under 'ui.navbar'.  The roll-ups and breakdowns are handled automatically. 
				Titanium.Analytics.featureEvent('ui.navbar.title');
				var win = Titanium.UI.createWindow({url:'navbar_title.html',title:'Navbar Title'});
				win.open({animated:true});		
				break;
			}
			case 22:
			{
				Titanium.Analytics.featureEvent('ui.navbar.right');
				var win = Titanium.UI.createWindow({url:'navbar_right.html',title:'Navbar Right'});
				var b = Titanium.UI.createButton({
					systemButton:Titanium.UI.iPhone.SystemButton.TRASH
				});
				b.addEventListener('click',function(e)
				{
					var a= Titanium.UI.createAlertDialog();
					a.setTitle('Navbar Right Test');
					a.setMessage('you clicked the trash button');
					a.show();
				});
				win.setRightNavButton(b);
				win.open({animated:true});		

				break;
			}
			case 23:
			{
				Titanium.Analytics.featureEvent('ui.navbar.left');
				var win = Titanium.UI.createWindow({url:'navbar_left.html',title:'Navbar Left'});
				var b = Titanium.UI.createButton({
					systemButton:Titanium.UI.iPhone.SystemButton.TRASH
				});
				b.addEventListener('click',function(e)
				{
					var a= Titanium.UI.createAlertDialog();
					a.setTitle('Navbar Left Test');
					a.setMessage('you clicked the trash button');
					a.show();
				});
				win.setLeftNavButton(b);
				win.open({animated:true});		
				break;
			}
			case 24:
			{
				Titanium.Analytics.featureEvent('ui.navbar.hide');
				var win = Titanium.UI.createWindow({url:'navbar_hide.html',title:'Navbar Hide',hideNavBar:true});
				win.open({animated:true});		
				break;
			}
			case 25:
			{
				Titanium.Analytics.featureEvent('ui.navbar.color');
				var win = Titanium.UI.createWindow({url:'navbar_color.html',title:'Bar Color'});
				win.setBarColor('#111111')
				win.open({animated:true});		
				break;
			}
			case 26:
			{
				Titanium.Analytics.featureEvent('ui.toolbar.left');
				var win = Titanium.UI.createWindow({url:'toolbar_left.html',title:'Toolbar Left'});
				win.open({animated:true});		
				break;
			}
			case 27:
			{
				Titanium.Analytics.featureEvent('ui.toolbar.middle');
				var win = Titanium.UI.createWindow({url:'toolbar_middle.html',title:'Toolbar Middle'});
				win.open({animated:true});		
				break;
			}
			case 28:
			{
				Titanium.Analytics.featureEvent('ui.toolbar.right');
				var win = Titanium.UI.createWindow({url:'toolbar_right.html',title:'Toolbar Right'});
				win.open({animated:true});		
				break;
			}
			case 29:
			{
				Titanium.Analytics.featureEvent('ui.toolbar.lots');
				var win = Titanium.UI.createWindow({url:'toolbar_lots.html',
					title:'Toolbar Many Buttons',hideTabBar:true,barColor:'#000000'});
				win.open({animated:true});		
				break;
			}
			case 30:
			{
				Titanium.Analytics.featureEvent('ui.toolbar.fixedspace');
				var win = Titanium.UI.createWindow({url:'toolbar_fixedspace.html',
					title:'Toolbar Fixed Space',hideTabBar:true});
				win.open({animated:true});		
				break;
			}
			case 31:
			{
				Titanium.Analytics.featureEvent('ui.toolbar.hideshow');
				var win = Titanium.UI.createWindow({url:'toolbar_hideshow.html',
					title:'Toolbar Hide/Show'});
				win.open({animated:true});		
				break;
			}

			case 32:
			{
				Titanium.Analytics.featureEvent('ui.tabbar');
				var win = Titanium.UI.createWindow({
					url:'tabbar_hide.html',
					title:'Tabbar Hide',
					hideTabBar:true,
					hideNavBar:true
				});
				win.open({animated:true});		
				break;
			}
			case 33:
			{
				Titanium.Analytics.featureEvent('ui.open_no_animation');
				var win = Titanium.UI.createWindow({url:'animated_false.html',title:'Animated False'});
				win.open({animated:false});		
				break;
			}

			case 34:
			{
				Titanium.Analytics.featureEvent('ui.notification');
				if (Titanium.Platform.name == 'android')
				{
					var notification = Titanium.UI.createNotification()
					notification.setMessage('Hello World');
					notification.show();
				}
				break;
			}
			
			case 35:
			{
				// Putting this event outside of the conditionally executed block
				// allows me to track whether users on one platform are trying to access
				// features accessible only to another platform.  Perhaps I will need to re-design
				// my UI if this appears to be the case!
				Titanium.Analytics.featureEvent('ui.menu');
				if (Titanium.Platform.name == 'android')
				{
				
					var menu = Titanium.UI.createMenu();

					menu.addItem("Google", function() {
						Titanium.Platform.openURL('http://google.com');
						} , Titanium.UI.Android.SystemIcon.ADD);
					menu.addItem("Yahoo", function() {
						Titanium.Platform.openURL('http://yahoo.com');
						}, Titanium.UI.Android.SystemIcon.ADD);

					Titanium.UI.setMenu(menu);
				}
				break;
				
			}
			
			case 36:
			{
				Titanium.Analytics.featureEvent('ui.dynamic.content');
				var win = Titanium.UI.createWindow({url:'dynamic_content.html',title:'Dynamic Content',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}

			case 37:
			{
				Titanium.Analytics.featureEvent('ui.tab_change');
				var win = Titanium.UI.createWindow({url:'tabchange.html',title:'Tab Change',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}
			case 38:
			{
				Titanium.Analytics.featureEvent('ui.js.events');
				var win = Titanium.UI.createWindow({url:'js_events.html',title:'JS Events',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}
			case 39:
			{
				Titanium.Analytics.featureEvent('ui.js.events2');
				var win = Titanium.UI.createWindow({url:'js_events2.html',title:'JS Events 2',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}

			case 40:
			{
				Titanium.Analytics.featureEvent('ui.dynamic.images');
				var win = Titanium.UI.createWindow({url:'dynamic_images.html',title:'Dynamic Images',backgroundColor:'#fff'});
				win.open({animated:true});		
				break;
			}
			case 41:
			{
				Titanium.Analytics.featureEvent('ui.window_title');
				Titanium.UI.currentWindow.setTitle('New Title');
				break;
			}
			case 42:
			{
				Titanium.Analytics.featureEvent('ui.back_button.1');
				var win = Titanium.UI.createWindow({
					url:'back_button.html',
					title:'Custom Back Button', 
					backButtonTitle:'It worked'
				});
				win.open({animated:true});		
				break;
			}
			case 43:
			{
				Titanium.Analytics.featureEvent('ui.back_button.2');
				var win = Titanium.UI.createWindow({
					url:'back_button.html',
					title:'Custom Back Image', 
					backButtonTitleImage:'chat.png'
				});
				win.open({animated:true});		
				break;
			}
			case 44:
			{
				Titanium.Analytics.featureEvent('ui.table_view_data');
				var win = Titanium.UI.createWindow({
					url:'custom_table_view_data.html',
					title:'Custom TV Data'
				});
				win.open({animated:true});		
				break;
			}
			case 45:
			{
				Titanium.Analytics.featureEvent('ui.set_control_values');
				var win = Titanium.UI.createWindow({
					url:'set_control_values.html',
					title:'Set Control Values',
					backgroundColor:'#fff'
				});
				win.open({animated:true});		
				break;
			}
			case 46:
			{
				Titanium.Analytics.featureEvent('ui.modal_window');
				var win = Titanium.UI.createWindow({
					url:'modal.html',
					title:'Modal Window' 
				});
				var b = Titanium.UI.createButton({
					title:'Close',
					style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN
				});
				win.setLeftNavButton(b);
				b.addEventListener('click',function()
				{
					win.close();
				})
				win.open({modal:true});		
				break;
			}
			case 47:
			{
				Titanium.Analytics.featureEvent('ui.picker');
				var win = Titanium.UI.createWindow({
					url:'pickers.html',
					title:'Pickers',
					backgroundColor:'#fff' 
				});
				win.open({animated:true});		
				break;
			}
			case 48:
			{
				Titanium.Analytics.featureEvent('ui.tableview_woodgrain');
				var win = Titanium.UI.createWindow({
					url:'tableview_woodgrain.html',
					title:'Custom TableView',
					backgroundColor:'#fff',
					barImage:'images/woodgrainheader.png',
					barColor:'brown'
				});
				win.open({animated:true});		
				break;
			}
			case 49:
			{
				Titanium.Analytics.featureEvent('ui.appbadge');
				Titanium.UI.setAppBadge(2);
				break;
			}
			case 50:
			{
				Titanium.Analytics.featureEvent('ui.resetappbadge');
				Titanium.UI.setAppBadge(null);
				break;
			}
			case 51:
			{
				Titanium.Analytics.featureEvent('ui.keyboard_toolbar');
				var win = Titanium.UI.createWindow({
					url:'keyboard_toolbar.html',
					title:'Custom Keyboard Toolbar',
					barColor:'#800080'
				});
				win.open({animated:true});		
				break;
			}
		}
	});

	Titanium.UI.currentWindow.addView(tableView);
	Titanium.UI.currentWindow.showView(tableView);

	// FUNCTIONS
	
	//
	//  alert test
	//
	function showAlert()
	{
		var a = Titanium.UI.createAlertDialog({title:'Alert Test',message:'it worked',buttonNames:['OK','Cancel']});
		a.show();
		var b = Titanium.UI.createAlertDialog({buttonNames:['OK']});
		b.setTitle('Click Event');
		a.addEventListener('click',function(e)
		{
			if (e.index == 0)
			{
				b.setMessage('You clicked OK');
			}
			else
			{
				b.setMessage('You clicked Cancel');
			}
			b.show();
		});
		
	};

	//
	// show options dialog
	//
	function showOptionsDialog()
	{
		var a = Titanium.UI.createAlertDialog();
		a.setTitle('Dialog Test');
		a.setButtonNames(['OK']);
		
		// create dialog
		var dialog = Titanium.UI.createOptionDialog();

		// set button titles
		dialog.setOptions(["Pick A","Pick B","cancel"]);

		// set index for destructive button (IPHONE ONLY) - makes button RED
		dialog.setDestructive(1);

		// set index for cancel (IPHONE ONLY)
		dialog.setCancel(2);

		// set title
		dialog.setTitle('My Title');

		// add event listener
		dialog.addEventListener('click',function(e)
		{
			a.setMessage('you clicked button index ' + e.index);
			a.show();
		});

		// show dialog
		dialog.show();
		
	};
	

	</script>
</head>
<body>
	
</body>
</html>